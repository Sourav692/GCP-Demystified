So, when you look at a BigQuery plan, you're looking for any stage where there is a significant difference between the average and the max time. And whenever you do this, it indicates a significant data skew. And one of the ways that you can fix this is by probably removing the tail, for example, with the having clause, filtering them out so that you're not processing those tail things. You also then look at the amount of time that's been spent waiting, and that would might indicate that you might want to do your filtering earlier. You should also look at the time that spent on CPU tasks on the compute and if there's a lot of time that's spent on the compute. And again, what I mean here is that you look at these stages, and if it turns out – in this case, the longest stage is a wait – but let's say the longest stage, the thing that's completely filled is a compute, then you know that for that stage, that computation function is the one that's taking the longest period of time and that's the thing that you should look at on optimizing. The other thing that you can do is that you can monitor BigQuery with Stackdriver. So it's a fully interactive GUI. You can create dashboards, you can look at how many slots were utilized, what queries are in flight, how many bytes were uploaded or stored. In terms of pricing BigQuery, basically there are three categories of BigQuery pricing. First of all the things that are free. Loading data into BigQuery, exporting data from BigQuery, any queries on metadata. How many rows are there in this table? How many columns are there in this table? What are the names of the columns? Those queries like that, they're always free. Any cached query is free, right? So if you run a query and you run the exact same query in that project, it's free, right? Anything that has already been cached and you're getting it back is free. The caches are per user for privacy reasons. So if you have two users in a project, they don't share the cache, okay? So it's a per user cache, but

any query whose results are returned from the cache is free. Any query that has an error is also free.

Now things that are not free, storage and processing. So you get charged based on the amount of data in the table. If you have streaming data, you get charged based on the ingest rate of that streaming data. And you will get an automatic discount for data that you haven't edited in a while. So you automatically get a discount for older data. The other category that you have for pricing is processing, okay? So for processing prices, you can have on-demand pricing. Basically, each query we look at the amount of data that that query processes. And the charge for the query is based on the amount of data that's being processed, with the first terabyte a month being free. So it's data that you're processing beyond 1 terabyte is what you pay for. You also have a flat rate plan, but the flat rate plan is something that you talk to your sales team about. And the third thing is that you may have some functions that are extremely high compute, especially JavaScript functions that are very high compute. You have to opt in to run them. And so there's a special charge for those.

So quick resources, the BigQuery documentation, tutorials on BigQuery, pricing information on BigQuery and client libraries for BigQuery. This is how you interact with BigQuery from Python, Java, etc.


https://cloud.google.com/bigquery/docs/

https://cloud.google.com/bigquery/docs/tutorials

https://cloud.google.com/bigquery/pricing

https://cloud.google.com/bigquery/client-libraries
